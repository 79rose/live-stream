'use client';

import useUserStore from '@/hooks/useUser';
import useUserModal from '@/hooks/useUserModal';
import {
  EditOutlined,
  EllipsisOutlined,
  UploadOutlined,
} from '@ant-design/icons';
import { Avatar, Card, Image, Popover } from 'antd';
import { useState } from 'react';
const App = () => {
  const editName = <div className="font-semibold">编辑账号</div>;
  const updateAvatar = <div className="font-semibold">更新头像</div>;
  const { userImg: avatar, userName: name } = useUserStore();
  const [visible, setVisible] = useState(false);
  const scaleStep = 1;
  const { onOpen } = useUserModal();

  const toViewAvatar = () => {
    setVisible(true);
  };

  const updateUser = () => {
    onOpen();
  };

  return (
    <div>
      <Card
        className="
         mx-auto mt-4 
          w-screen
          bg-[#f0f2f5]
          sm:w-[400px]
          md:w-[500px]
          lg:w-[600px]
          xl:w-[700px]
        "
        hoverable
        cover={
          <div className="relative h-[200px] w-full bg-[#f0f2f5]">
            <div
              className="
              left-50 absolute left-[50%]  top-10 -translate-x-1/2 transform
              "
            >
              <svg
                width="426.3"
                height="87.571"
                viewBox="0 0 426.3 87.571"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g
                  id="svgGroup"
                  stroke-linecap="round"
                  fill-rule="evenodd"
                  font-size="9pt"
                  stroke="#fff"
                  stroke-width="0.25mm"
                  fill="#fff"
                  // style="stroke:#000;stroke-width:0.25em;fill:#000"
                  style={{
                    stroke: '#000',
                    strokeWidth: '0.3mm',
                    fill: '#000',
                  }}
                >
                  <path
                    d="M 303.345 12.496 L 301.14 14.701 A 39.091 39.091 0 0 0 288.9 6.469 A 44.53 44.53 0 0 0 288.383 6.248 A 40.068 40.068 0 0 0 276.901 3.396 A 48.951 48.951 0 0 0 271.95 3.151 A 46.702 46.702 0 0 0 262.184 4.133 A 38.301 38.301 0 0 0 255.255 6.301 Q 247.8 9.451 242.445 15.016 Q 237.09 20.581 234.202 27.983 Q 231.315 35.386 231.315 43.786 A 43.342 43.342 0 0 0 233.769 58.425 A 41.308 41.308 0 0 0 234.203 59.588 Q 237.09 66.991 242.445 72.556 Q 247.8 78.121 255.255 81.271 A 39.897 39.897 0 0 0 266.349 84.113 A 49.7 49.7 0 0 0 271.95 84.421 A 45.579 45.579 0 0 0 282.036 83.343 A 38.334 38.334 0 0 0 288.382 81.323 A 39.621 39.621 0 0 0 299.769 74.174 A 37.584 37.584 0 0 0 301.14 72.871 L 303.345 75.076 Q 297.57 80.851 289.59 84.211 Q 281.61 87.571 271.95 87.571 A 49.474 49.474 0 0 1 261.428 86.491 A 41.188 41.188 0 0 1 254.047 84.158 Q 246.015 80.746 240.24 74.761 Q 234.465 68.776 231.315 60.848 A 45.285 45.285 0 0 1 228.193 45.488 A 52.028 52.028 0 0 1 228.165 43.786 A 46.805 46.805 0 0 1 230.088 30.249 A 43.217 43.217 0 0 1 231.315 26.723 Q 234.465 18.796 240.24 12.811 Q 246.015 6.826 254.047 3.413 A 42.984 42.984 0 0 1 266.525 0.272 A 52.937 52.937 0 0 1 271.95 0.001 A 49.093 49.093 0 0 1 282.829 1.167 A 41.703 41.703 0 0 1 289.59 3.308 Q 297.57 6.616 303.345 12.496 Z M 298.41 17.431 L 296.1 19.741 Q 291.795 15.226 285.653 12.706 A 33.643 33.643 0 0 0 276.537 10.432 A 41.692 41.692 0 0 0 271.95 10.186 A 39.64 39.64 0 0 0 262.891 11.178 A 31.142 31.142 0 0 0 254.048 14.701 Q 246.435 19.216 242.34 26.828 A 34.613 34.613 0 0 0 238.309 41.476 A 41.24 41.24 0 0 0 238.245 43.786 A 36.132 36.132 0 0 0 240.536 56.728 A 34.122 34.122 0 0 0 242.34 60.691 Q 246.435 68.356 254.047 72.871 A 32.017 32.017 0 0 0 265.78 76.945 A 41.773 41.773 0 0 0 271.95 77.386 A 39.208 39.208 0 0 0 280.006 76.588 A 32.297 32.297 0 0 0 285.653 74.866 A 30.437 30.437 0 0 0 294.348 69.518 A 28.612 28.612 0 0 0 296.1 67.831 L 298.41 70.141 A 35.784 35.784 0 0 1 287.534 77.535 A 40.737 40.737 0 0 1 286.912 77.806 A 35.504 35.504 0 0 1 277.006 80.36 A 44.417 44.417 0 0 1 271.95 80.641 A 42.097 42.097 0 0 1 263.073 79.74 A 34.561 34.561 0 0 1 256.778 77.753 Q 250.005 74.866 245.122 69.826 Q 240.24 64.786 237.667 58.118 A 39.02 39.02 0 0 1 235.12 45.273 A 44.833 44.833 0 0 1 235.095 43.786 Q 235.095 36.121 237.667 29.453 Q 240.24 22.786 245.122 17.693 Q 250.005 12.601 256.777 9.766 A 36.509 36.509 0 0 1 266.828 7.211 A 45.597 45.597 0 0 1 271.95 6.931 Q 280.245 6.931 286.912 9.713 Q 293.58 12.496 298.41 17.431 Z M 114.555 85.996 L 89.46 85.996 L 89.46 43.786 L 114.555 43.786 L 114.555 46.936 L 92.61 46.936 L 92.61 50.716 L 114.555 50.716 L 114.555 53.866 L 92.61 53.866 L 92.61 59.851 L 111.195 59.851 L 111.195 63.001 L 92.61 63.001 L 92.61 66.781 L 111.195 66.781 L 111.195 69.931 L 92.61 69.931 L 92.61 75.916 L 114.555 75.916 L 114.555 79.066 L 92.61 79.066 L 92.61 82.846 L 114.555 82.846 L 114.555 85.996 Z M 293.475 22.366 L 291.27 24.571 A 24.976 24.976 0 0 0 283.61 19.382 A 28.676 28.676 0 0 0 282.975 19.111 Q 278.145 17.116 271.95 17.116 A 32.756 32.756 0 0 0 265.052 17.809 A 24.59 24.59 0 0 0 257.512 20.738 Q 251.475 24.361 248.325 30.398 A 28.077 28.077 0 0 0 245.213 42.193 A 33.337 33.337 0 0 0 245.175 43.786 A 29.674 29.674 0 0 0 246.597 53.07 A 27.024 27.024 0 0 0 248.325 57.173 Q 251.475 63.211 257.512 66.833 A 24.922 24.922 0 0 0 265.982 69.946 A 33.523 33.523 0 0 0 271.95 70.456 Q 278.145 70.456 282.975 68.461 A 25.614 25.614 0 0 0 289.894 64.273 A 23.917 23.917 0 0 0 291.27 63.001 L 293.475 65.206 A 27.1 27.1 0 0 1 286.223 70.479 A 31.998 31.998 0 0 1 284.235 71.401 A 29.128 29.128 0 0 1 276.282 73.462 A 36.693 36.693 0 0 1 271.95 73.711 Q 262.605 73.711 255.885 69.668 Q 249.165 65.626 245.595 58.801 A 31.664 31.664 0 0 1 242.039 44.804 A 37.006 37.006 0 0 1 242.025 43.786 A 33.294 33.294 0 0 1 243.544 33.611 A 30.061 30.061 0 0 1 245.595 28.718 Q 249.165 21.946 255.885 17.903 A 27.79 27.79 0 0 1 265.572 14.383 A 37.409 37.409 0 0 1 271.95 13.861 A 35.551 35.551 0 0 1 278.816 14.498 A 28.566 28.566 0 0 1 284.235 16.118 A 27.251 27.251 0 0 1 291.348 20.368 A 25.021 25.021 0 0 1 293.475 22.366 Z M 363.195 85.996 L 359.835 85.996 L 375.165 43.786 L 378.525 43.786 L 393.855 85.996 L 390.495 85.996 L 376.845 48.406 L 374.85 53.866 L 386.505 85.996 L 383.145 85.996 L 381.36 80.956 L 364.98 80.956 L 363.195 85.996 Z M 170.52 85.996 L 167.37 85.996 L 167.37 53.866 L 155.19 53.866 L 155.19 50.716 L 189.735 50.716 L 189.735 53.866 L 177.45 53.866 L 177.45 85.996 L 174.3 85.996 L 174.3 53.866 L 170.52 53.866 L 170.52 85.996 Z M 407.085 85.996 L 403.935 85.996 L 403.935 53.866 L 391.755 53.866 L 391.755 50.716 L 426.3 50.716 L 426.3 53.866 L 414.015 53.866 L 414.015 85.996 L 410.865 85.996 L 410.865 53.866 L 407.085 53.866 L 407.085 85.996 Z M 320.775 85.996 L 317.625 85.996 L 317.625 43.786 L 320.775 43.786 L 320.775 59.851 L 337.155 59.851 L 337.155 43.786 L 340.305 43.786 L 340.305 85.996 L 337.155 85.996 L 337.155 69.931 L 320.775 69.931 L 320.775 85.996 Z M 120.12 85.996 L 116.445 85.996 L 128.94 63.946 L 117.495 43.786 L 121.17 43.786 L 145.11 85.996 L 141.435 85.996 L 134.715 74.236 L 128.1 85.996 L 124.425 85.996 L 132.93 70.981 L 130.725 67.201 L 120.12 85.996 Z M 73.08 85.996 L 69.93 85.996 L 69.93 1.576 L 73.08 1.576 L 73.08 85.996 Z M 3.15 85.996 L 0 85.996 L 0 1.576 L 3.15 1.576 L 3.15 85.996 Z M 10.08 85.996 L 6.93 85.996 L 6.93 1.576 L 10.08 1.576 L 10.08 85.996 Z M 59.22 85.996 L 56.07 85.996 L 56.07 1.576 L 59.22 1.576 L 59.22 85.996 Z M 66.15 85.996 L 63 85.996 L 63 1.576 L 66.15 1.576 L 66.15 85.996 Z M 17.01 85.996 L 13.86 85.996 L 13.86 1.576 L 17.01 1.576 L 17.01 85.996 Z M 153.09 85.996 L 149.415 85.996 L 125.475 43.786 L 129.15 43.786 L 134.925 53.866 L 140.595 43.786 L 144.165 43.786 L 136.71 57.121 L 138.915 61.006 L 148.47 43.786 L 152.145 43.786 L 140.7 64.156 L 153.09 85.996 Z M 52.29 51.346 L 52.29 56.911 L 20.79 11.656 L 20.79 6.091 L 52.29 51.346 Z M 52.29 63.526 L 52.29 69.091 L 20.79 23.836 L 20.79 18.271 L 52.29 63.526 Z M 52.29 75.706 L 52.29 81.271 L 20.79 36.016 L 20.79 30.451 L 52.29 75.706 Z M 355.845 85.996 L 352.485 85.996 L 367.815 43.786 L 371.175 43.786 L 355.845 85.996 Z M 347.235 85.996 L 344.085 85.996 L 344.085 43.786 L 347.235 43.786 L 347.235 85.996 Z M 85.68 85.996 L 82.53 85.996 L 82.53 43.786 L 85.68 43.786 L 85.68 85.996 Z M 313.845 85.996 L 310.695 85.996 L 310.695 43.786 L 313.845 43.786 L 313.845 85.996 Z M 189.735 46.936 L 155.19 46.936 L 155.19 43.786 L 189.735 43.786 L 189.735 46.936 Z M 426.3 46.936 L 391.755 46.936 L 391.755 43.786 L 426.3 43.786 L 426.3 46.936 Z M 219.765 63.001 L 196.035 63.001 L 196.035 59.851 L 219.765 59.851 L 219.765 63.001 Z M 219.765 69.931 L 196.035 69.931 L 196.035 66.781 L 219.765 66.781 L 219.765 69.931 Z M 320.775 63.001 L 320.775 66.781 L 337.155 66.781 L 337.155 63.001 L 320.775 63.001 Z M 373.17 58.486 L 368.655 70.876 L 377.685 70.876 L 373.17 58.486 Z M 367.5 74.026 L 366.135 77.806 L 380.205 77.806 L 378.84 74.026 L 367.5 74.026 Z"
                    vector-effect="non-scaling-stroke"
                  />
                  <animate
                    attributeName="stroke-dasharray"
                    from="0,100"
                    to="100,0"
                    dur="5s"
                    repeatCount="indefinite"
                  />
                  <animate
                    attributeName="stroke-dashoffset"
                    from="0"
                    to="100"
                    dur="5s"
                    repeatCount="indefinite"
                  />
                </g>
              </svg>
            </div>
          </div>
        }
        actions={[
          <Popover
            content={editName}
            trigger="hover"
            placement="bottom"
            key="name"
          >
            <EditOutlined
              className="h-[20px] w-[20px] hover:scale-105 hover:text-black"
              style={{
                fontSize: '20px',
                color: 'purple',
              }}
              onClick={updateUser}
            />
          </Popover>,
          <Popover
            content={updateAvatar}
            trigger="hover"
            placement="bottom"
            key="avatar"
          >
            <UploadOutlined
              className="h-[20px] w-[20px] hover:scale-105 hover:text-black"
              style={{
                fontSize: '20px',
                color: 'purple',
              }}
              onClick={updateUser}
            />
          </Popover>,
          <EllipsisOutlined
            className="h-[20px] w-[20px] hover:scale-105 hover:text-black"
            style={{
              fontSize: '20px',
              color: 'purple',
            }}
            key="more"
          />,
        ]}
      >
        <div
          className="
      flex
      flex-col
      items-center
      gap-1
      rounded-lg
      bg-[#fff]
      p-4
      text-[#000]
      shadow-md
    "
        >
          <div
            className="flex items-center 
          gap-4 text-2xl font-bold
          "
          >
            <h2>
              你好, <span className="text-blue-500">{name}</span>
            </h2>
            <Avatar src={avatar} onClick={toViewAvatar} />
          </div>
          <p className="ml-auto text-sm text-gray-500">
            欢迎使用
            <span className="text-blue-500">next-chat</span>
          </p>
        </div>
      </Card>
      <Image
        width={200}
        style={{ display: 'none' }}
        src={avatar}
        preview={{
          visible,
          scaleStep,
          src: avatar,
          onVisibleChange: (value) => {
            setVisible(value);
          },
        }}
      />
    </div>
  );
};

export default App;
